<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
    <edmx:DataServices>
        <Schema Namespace="Microsoft.OData.SampleService.Models.TripPin" xmlns="http://docs.oasis-open.org/odata/ns/edm">
               <!-- http://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/part3-csdl/odata-v4.0-errata03-os-part3-csdl-complete.html#_Toc453752573 -->
            <TypeDefinition Name="Weight" UnderlyingType="Edm.Int32">
                <Annotation Term="Org.OData.Measures.V1.Unit" String="Kilograms" />
            </TypeDefinition>
            <EnumType Name="Gender">
                <Member Name="Male" Value="0" />
                <Member Name="Female" Value="1" />
                <Member Name="Nonspecific" Value="2" />
            </EnumType>
            <ComplexType Name="Location" OpenType="true">
                <Property Name="Address" Type="Edm.String" Nullable="false" />
                <Property Name="City" Type="Edm.String" Nullable="false" />
            </ComplexType>

            <EntityType Name="Airport">
                <Key>
                    <PropertyRef Name="Name" />
                </Key>
                <Property Name="Name" Type="Edm.String" Nullable="false" />
                <Property Name="Location" Type="Edm.String" Nullable="false" />
            </EntityType>
            <EntityType Name="PublicTransportation">
                <Property Name="SeatNumber" Type="Edm.String" />
            </EntityType>
            <EntityType Name="Flight" BaseType="Microsoft.OData.SampleService.Models.TripPin.PublicTransportation">
                <Property Name="FlightNumber" Type="Edm.String" Nullable="false" />
                <Property Name="NameOfDestination" Type="Edm.String" />
                <NavigationProperty Name="From" Type="Microsoft.OData.SampleService.Models.TripPin.Airport" Nullable="false" />
                <NavigationProperty Name="To" Type="Microsoft.OData.SampleService.Models.TripPin.Airport" Nullable="false">
                     <ReferentialConstraint Property="NameOfDestination" ReferencedProperty="Name" />
                </NavigationProperty>
            </EntityType>
            <EntityType Name="Person" OpenType="true">
                <Key>
                    <PropertyRef Name="UserName" />
                </Key>
                <Property Name="UserName" Type="Edm.String" Nullable="false" />
                <Property Name="Emails" Type="Collection(Edm.String)" />
                <Property Name="AddressInfo" Type="Collection(Microsoft.OData.SampleService.Models.TripPin.Location)" />
                <Property Name="Gender" Type="Microsoft.OData.SampleService.Models.TripPin.Gender" />
                <Property Name="Weight" Type="Microsoft.OData.SampleService.Models.TripPin.Weight" />
                <NavigationProperty Name="Friends" Type="Collection(Microsoft.OData.SampleService.Models.TripPin.Person)" Partner="Friends" />
            </EntityType>

             <EntityContainer Name="DefaultContainer">
                 <EntitySet Name="Airports" EntityType="Microsoft.OData.SampleService.Models.TripPin.Airport" />
                 <EntitySet Name="People" EntityType="Microsoft.OData.SampleService.Models.TripPin.Person">
                    <NavigationPropertyBinding Path="Friends" Target="People" />
                    <NavigationPropertyBinding Path="Microsoft.OData.SampleService.Models.TripPin.Flight/From" Target="Airports" />
                    <NavigationPropertyBinding Path="Microsoft.OData.SampleService.Models.TripPin.Flight/To" Target="Airports" />
                 </EntitySet>
             </EntityContainer>
        </Schema>
    </edmx:DataServices>
</edmx:Edmx>
